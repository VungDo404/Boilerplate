<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.27.xsd"
	objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
	<changeSet id="1730204895612-1" author="Admin (generated)">
		<createTable tableName="token">
			<column autoIncrement="true" name="id" type="INT UNSIGNED">
				<constraints nullable="false" primaryKey="true" primaryKeyName="pk_token"/>
			</column>
			<column name="type" type="SMALLINT">
				<constraints nullable="false"/>
			</column>
			<column name="value" type="VARCHAR(40)">
				<constraints nullable="false"/>
			</column>
			<column name="expire_date" type="DATETIME"/>
			<column name="user_id" type="binary(16)">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet id="1730204895612-2" author="Admin (generated)">
		<createTable tableName="user">
			<column name="id" type="binary(16)">
				<constraints nullable="false" primaryKey="true" primaryKeyName="pk_user"/>
			</column>
			<column name="created_by_id" type="binary(16)"/>
			<column name="created_date" type="DATETIME"/>
			<column name="last_modified_by_id" type="binary(16)"/>
			<column name="last_modified_date" type="DATETIME"/>
			<column name="display_name" type="VARCHAR(50)"/>
			<column name="username" type="VARCHAR(50)">
				<constraints nullable="false"/>
			</column>
			<column name="password" type="VARCHAR(60)">
				<constraints nullable="false"/>
			</column>
			<column name="email" type="VARCHAR(50)">
				<constraints nullable="false"/>
			</column>
			<column name="image" type="VARCHAR(100)"/>
			<column name="email_specify" type="DATETIME"/>
			<column defaultValueComputed="0" name="enabled" type="BIT"/>
			<column defaultValueComputed="0" name="account_non_locked" type="BIT"/>
			<column defaultValueComputed="0" name="credentials_non_expired" type="BIT"/>
			<column defaultValueComputed="0" name="account_non_expired" type="BIT"/>
			<column defaultValueComputed="0" name="is_two_factor_enabled" type="BIT"/>
			<column name="security_stamp" type="VARCHAR(50)"/>
			<column defaultValueComputed="0" name="is_lockout_enabled" type="BIT"/>
			<column name="access_failed_count" type="SMALLINT"/>
			<column name="lockout_end_date" type="DATETIME"/>
		</createTable>
	</changeSet>
	<changeSet id="1730204895612-3" author="Admin (generated)">
		<addUniqueConstraint columnNames="value" constraintName="uc_token_value" tableName="token"/>
	</changeSet>
	<changeSet id="1730204895612-4" author="Admin (generated)">
		<addUniqueConstraint columnNames="display_name" constraintName="uc_user_displayname" tableName="user"/>
	</changeSet>
	<changeSet id="1730204895612-5" author="Admin (generated)">
		<addUniqueConstraint columnNames="email" constraintName="uc_user_email" tableName="user"/>
	</changeSet>
	<changeSet id="1730204895612-6" author="Admin (generated)">
		<createIndex indexName="idx_token_value" tableName="token">
			<column name="value"/>
		</createIndex>
	</changeSet>
	<changeSet id="1730204895612-7" author="Admin (generated)">
		<createIndex indexName="idx_user_username" tableName="user">
			<column name="username"/>
		</createIndex>
	</changeSet>
	<changeSet id="1730204895612-8" author="Admin (generated)">
		<addForeignKeyConstraint baseColumnNames="user_id" baseTableName="token" constraintName="FK_TOKEN_ON_USER"
								 referencedColumnNames="id" referencedTableName="user"/>
	</changeSet>
	<changeSet id="1730204895612-9" author="Admin (generated)">
		<addForeignKeyConstraint baseColumnNames="created_by_id" baseTableName="user"
								 constraintName="FK_USER_ON_CREATEDBY" referencedColumnNames="id"
								 referencedTableName="user"/>
	</changeSet>
	<changeSet id="1730204895612-10" author="Admin (generated)">
		<addForeignKeyConstraint baseColumnNames="last_modified_by_id" baseTableName="user"
								 constraintName="FK_USER_ON_LASTMODIFIEDBY" referencedColumnNames="id"
								 referencedTableName="user"/>
	</changeSet>

</databaseChangeLog>
